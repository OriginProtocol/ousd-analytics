{% load blockchain %}

<head>
  <link href="/static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
</head>

<div>
  <style>
    .box {
      margin: 32px;
      padding: 40px;
      background-color: #F0F2F4;
      max-width: 1162px;
    }

    .table {
      margin: auto;
    }

    h2 {
        margin-bottom: 20px;
    }

    .green {
        color: green;
    }

    .red {
        color: red;
    }

    .value {
      text-align: right;
    }
  </style>
  <div class="box">
    <div>
      <img src="/static/core/img/origin-dollar.svg" alt="origin dollar" />
      <h2>{{type}} Analytics Report</h2>
      <h4>
          {% if type == 'Weekly' %}
            For the week ending {{report.end_time}}
          {% else %}
            For the month ending {{report.end_time}}
          {% endif %}
      </h4>

      <h2>
        <img src="/static/core/img/ousd.svg" alt="ousd" />
        OUSD
      </h2>

        <table class='value table'>
          <tr>
            <td class='text-start w-50'>Top indicators</td>
            <td>w/e {{report.end_time|date:'d M'}}</td>
            <td>w/e {{report.start_time|date:'d M'}}</td>
            <td>Change</td>
          </tr>
          <tr>
            <td class='text-start'>Total Supply</td>
            <td>{{report|class_value:'total_supply'}}<span style="{{change|dict_color_style:'total_supply'}}"> ({{change|dict_value:'total_supply'|floatformat_rnd_down:1}}%)</span></td>
            <td></td>
          </tr>
          {% for pool in report.pools %}
          <tr>
              <td class='text-start'>{{pool|dict_value:'name'}}</td>
              <td>{{pool|dict_value:'amount'|floatformat_rnd_down:0}}</td>
              {% if pool.is_rebasing %}
                <td>Rebasing</td>
              {% else %}
                <td>Non Rebasing</td>
              {% endif %}
          </tr>
          {% endfor %}
          <tr>
              <td class='text-start'>Remaining Rebasing</td>
              <td>{{report|class_value:'other_rebasing'|floatformat_rnd_down:0}}<span style="{{change|dict_color_style:'other_rebasing'}}"> ({{change|dict_value:'other_rebasing'|floatformat_rnd_down:1}}%)</span></td>
              <td>Rebasing</td>
          </tr>
          <tr>
              <td class='text-start'>Remaining Non-rebasing</td>
              <td>{{report|class_value:'other_non_rebasing'|floatformat_rnd_down:0}}<span style="{{change|dict_color_style:'other_non_rebasing'}}"> ({{change|dict_value:'other_non_rebasing'|floatformat_rnd_down:1}}%)</span></td>
              <td>Non Rebasing</td>
          </tr>
        </table>

      <table class="value table">
        <tr>
          <td class='text-start w-50' style="min-width:265px;font-weight:bold;">More details</td>
          <td style="min-width:100px;font-weight:bold;">w/e {{report.end_time|date:'d M'}}</td>
          <td style="min-width:100px;font-weight:bold;">w/e {{report.start_time|date:'d M'}}</td>
          <td style="min-width:100px;font-weight:bold;">{{report.start_time}}</td>
        </tr>
          {% for statistic in stat_keys %}
          <tr>
              <td class='text-start'>{{stats|dict_value:statistic}}</td>
              <td>{{report|class_value:statistic}}<span style="{{change|dict_color_style:statistic}}"> ({{change|dict_value:statistic|floatformat_rnd_down:1}}%)</span></td>
          </tr>
          {% endfor %}
      </table>

      <h2>
        <img src="/static/core/img/ousd.svg" alt="ousd" />
        OUSD
      </h2>

      <table class="value table">
        <tr>
          <td class='text-start' style="min-width:265px;font-weight:bold;">Top indicators</td>
          <td style="min-width:100px;font-weight:bold;">w/e {{report.end_time|date:'d M'}}</td>
          <td style="min-width:100px;font-weight:bold;">w/e {{report.start_time|date:'d M'}}</td>
          <td style="min-width:100px;font-weight:bold;">{{report.start_time}}</td>
        </tr>
          {% for statistic in curve_stats %}
          <tr>
              <td class='text-start'>{{curve_stats|dict_value:statistic}}</td>
              <td>{{report|class_value:statistic|floatformat_rnd_down:2}}<span style="{{change|dict_color_style:statistic}}"> ({{change|dict_value:statistic|floatformat_rnd_down:1}}%)</span></td>
          </tr>
          {% endfor %}
      </table>
</div>